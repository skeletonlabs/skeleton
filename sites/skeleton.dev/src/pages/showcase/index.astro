---
import LayoutRoot from '@/components/layouts/root.astro';
import { Image } from 'astro:assets';
import Header from '@/components/ui/header.astro';
import Footer from '@/components/ui/footer.astro';
import { getCollection } from 'astro:content';

const layoutProps = {
	title: 'Showcase',
	description: 'Check out the showcase of amazing projects built by the Skeleton community.',
};

const projects = await Promise.all(
	(await getCollection('showcase-projects')).map(async (project) => {
		const thumbnail = await import(`@/images/showcase-thumbnails/${project.id}.png`);
		return {
			...project,
			thumbnail,
		};
	}),
);
---

<LayoutRoot {...layoutProps}>
	<!-- Header -->
	<Header />
	<!-- Main -->
	<main class="container mx-auto space-y-10 xl:space-y-20 py-10 xl:py-20 px-4">
		<!-- Hero -->
		<section class="text-center space-y-2">
			<h1 class="heading-font-family text-4xl md:text-5xl font-bold xl:text-balance">Build anything with Skeleton.</h1>
			<p class="xl:text-balance">Check out the showcase of amazing projects built by the Skeleton community.</p>
		</section>
		<!-- Project Grid -->
		<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
			{
				projects.map((project) => {
					return (
						<a href={project.data.url} target="_blank" class="card hover:preset-tonal p-2 space-y-2 cursor-pointer">
							<Image
								src={project.thumbnail}
								alt={`Thumbnail of ${project.data.name}`}
								class="bg-surface-500 ring-[1px] ring-surface-500/50 w-full aspect-video rounded-container shadow"
							/>
							<strong>{project.data.name}</strong>
							<p class="text-xs opacity-60">{project.data.description}</p>
						</a>
					);
				})
			}
		</section>
		<!-- CTA -->
		<section class="text-center space-y-4">
			<p>Have an interesting project you wish to share? Submit it here.</p>
			<!-- TODO: create a GitHub Discussions thread for submission. -->
			<a href="/" target="_blank" class="btn btn-lg preset-filled">Submit Project</a>
		</section>
	</main>
	<!-- Footer -->
	<Footer />
</LayoutRoot>
