---
import '@/app.css';
import { SEO } from 'astro-seo';
import favicon from '@/assets/favicon.png';
import { ClientRouter } from 'astro:transitions';
import Analytics from '@/components/ui/analytics.astro';
import ThemeLoader from '@/components/ui/theme-loader.astro';
import ModeLoader from '@/components/ui/mode-loader.astro';
import { getImage } from 'astro:assets';

interface Props {
	title?: string;
	description?: string;
	classList?: string;
}

const {
	title = 'Skeleton',
	description = 'Documentation for Skeleton, the UI toolkit for building high-quality web applications.',
	classList,
} = Astro.props;

const titleWithSkeletonSuffix = title === 'Skeleton' ? title : `${title} Â· Skeleton`;

const skeletonImage = await getImage({
	src: new URL(`/api/og-image?text=${title}`, Astro.site).toString(),
	format: 'png',
	inferSize: true,
});
---

<html lang="en" transition:animate="none">
	<head>
		<SEO
			title={titleWithSkeletonSuffix}
			description={description}
			canonical={Astro.site}
			charset="UTF-8"
			theme-color="#111111"
			openGraph={{
				basic: {
					title: titleWithSkeletonSuffix,
					type: 'website',
					url: Astro.site,
					image: skeletonImage.src,
				},
				image: {
					url: skeletonImage.src,
					secureUrl: skeletonImage.src,
					type: `image/png`,
					width: skeletonImage.options.width,
					height: skeletonImage.options.height,
					alt: titleWithSkeletonSuffix,
				},
				optional: {
					locale: 'en_US',
					siteName: 'Skeleton',
					description: description,
				},
			}}
			twitter={{
				title: titleWithSkeletonSuffix,
				description: description,
				image: skeletonImage.src,
				imageAlt: titleWithSkeletonSuffix,
				card: 'summary_large_image',
				site: Astro.site?.toString(),
			}}
			extend={{
				meta: [
					{
						name: 'viewport',
						content: 'width=device-width, initial-scale=1',
					},
					{
						name: 'keywords',
						content:
							'design system, tailwind, tailwind css, web, ui, components, svelte, sveltekit, react, next.js, vue, nuxt, solid, solidstart, astro, vite, reactive, a11y, accessibility, typescript, javascript, css, open source, adaptive, theme',
					},
					{
						name: 'generator',
						content: Astro.generator,
					},
				],
				link: [
					{
						rel: 'icon',
						type: `image/${favicon.format}`,
						href: favicon.src,
					},
					{
						rel: 'sitemap',
						href: '/sitemap-index.xml',
					},
				],
			}}
		/>
		<ModeLoader />
		<ThemeLoader />
		<Analytics />
		<ClientRouter />
	</head>
	<body class:list={[classList]}>
		<slot />
	</body>
</html>
