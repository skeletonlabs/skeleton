---
import { CheckIcon } from 'lucide-react';
---

<div class="w-full max-w-[960px] flex flex-col card bg-surface-50-950 border-[1px] border-surface-200-800 overflow-hidden">
	<div class="flex flex-col p-6 w-full">
		<h2 class="h2 pb-8" id="get-access">Get Access</h2>
		<span class="text-xl font-semibold h-full pb-6">Figma UI Kit for Skeleton includes:</span>
		<div class="flex flex-col gap-3">
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Figma Skeleton v3 Components library</p>
			</div>
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Lucide Icons</p>
			</div>
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Dark / Light Support</p>
			</div>
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Custom Theme Support</p>
			</div>
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Figma Plugin to import your custom Theme</p>
			</div>
			<div class="flex flex-row items-center gap-3">
				<div class="flex w-5 h-5 preset-tonal-primary rounded-full justify-center items-center">
					<CheckIcon size="12" />
				</div>
				<p>Tutorials</p>
			</div>
		</div>
	</div>
	<div class="flex flex-col md:flex-row bg-transparent w-full border-t border-surface-200-800">
		<div class="flex flex-col gap-1 p-6 border-r md:border-t-0 border-b md:border-b-0 border-surface-200-800 w-full">
			<span class="text-lg font-semibold">Individual License</span>
			<div class="flex flex-col h-full pt-12">
				<div class="flex flex-row gap-1 items-end pb-4">
					<span class="text-4xl font-semibold">$109</span>
					<span class="opacity-60">+1 year of updates </span>
				</div>
				<a
					href="https://buy.polar.sh/polar_cl_4Wd2CxwXfx-g5z-87D2PNRkdamIiohCLnxH3UqaAqGA"
					data-polar-checkout
					data-polar-checkout-theme="dark"
					class="btn btn-lg self-end preset-filled flex items-center gap-2 w-full">Buy</a
				>
			</div>
		</div>
		<div class="flex flex-col gap-1 p-6 w-full">
			<span class="text-lg font-semibold">Team License</span>

			<div class="flex flex-col h-full pt-12">
				<div class="flex flex-row gap-1 items-end pb-4">
					<span class="text-4xl font-semibold">$219</span>
					<span class="opacity-60">+1 year of updates </span>
				</div>
				<a
					href="https://buy.polar.sh/polar_cl_vLLsRrjP5rIuLgp6Loez6lPjyg1vrAhH435-MVhIpIk"
					data-polar-checkout
					data-polar-checkout-theme="dark"
					class="btn btn-lg self-end preset-filled flex items-center gap-2 w-full">Buy</a
				>
			</div>
		</div>
	</div>
</div>

<!-- Load the Polar checkout script -->
<script is:inline src="https://cdn.jsdelivr.net/npm/@polar-sh/checkout@0.1/dist/embed.global.js" data-auto-init></script>

<script>
	const htmlElement = document.documentElement;
	const buyButtons = document.querySelectorAll('[data-polar-checkout]');

	/**
	 * Updates the theme of the buy buttons based on data-mode attribute or dark class
	 */
	function updateTheme() {
		// Check both data-mode attribute and dark class
		const isDarkMode = htmlElement.getAttribute('data-mode') === 'dark' || htmlElement.classList.contains('dark');
		const theme = isDarkMode ? 'dark' : 'light';

		buyButtons.forEach((button) => {
			button.setAttribute('data-polar-checkout-theme', theme);
		});
	}

	// Initial update of the theme
	updateTheme();

	// Create a MutationObserver to observe changes to attributes of the HTML element
	new MutationObserver(() => {
		updateTheme();
	}).observe(htmlElement, {
		// Observe changes to attributes
		attributes: true,
		// Observe both class and data-mode attributes
		attributeFilter: ['class', 'data-mode'],
	});
</script>
