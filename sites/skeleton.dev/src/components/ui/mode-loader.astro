<script is:inline>
	function applyMode(document = window.document) {
		console.log('applying mode');
		document.documentElement.setAttribute('data-mode', localStorage.getItem('mode') ?? 'system');
	}

	applyMode();

	document.addEventListener('astro:before-swap', (event) => applyMode(event.newDocument));
</script>
