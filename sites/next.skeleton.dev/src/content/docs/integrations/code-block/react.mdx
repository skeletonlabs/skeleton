---
layout: '@layouts/LayoutDoc.astro'
---

export const components = componentSet;

import Example from '@examples/integrations/code-block/Example.astro';
import ReactComponentRaw from '@examples/integrations/code-block/ReactComponent.txt?raw';
import TypesRaw from '@examples/integrations/code-block/Types.txt?raw';
import ReactPageRaw from '@examples/integrations/code-block/ReactPage.txt?raw';

{/* --- */}

<p class="type-scale-5">Shiki (Âºè, a Japanese word for "Style") is a beautiful and powerful syntax highlighter based on TextMate grammar and themes, the same engine as VS Code's syntax highlighting. It provides accurate and fast syntax highlighting for almost any mainstream programming language.</p>

<figure class="card-filled-enhanced flex justify-center gap-4 p-8">
	<a href="https://shiki.style/" target="_blank" class="btn preset-filled">
		Shiki Documentation &rarr;
	</a>
</figure>

## Installation

[Install Shiki](https://shiki.style/guide/install) with your preferred package manager.

```console
npm install -D shiki
```

## Next.js Integration

Shiki provides [official documentation](https://shiki.style/packages/next) for integrating into Next.js. This guide will follow this outline.

## Create a Component

A reusable component should suffice in most projects. Tap the `code` tab below to access the source, then follow the steps below.

1. Implement a new `<CodeBlock>` component in `/src/components/CodeBlock/CodeBlock.tsx`.
2. Implement the required component prop types in `/src/components/CodeBlock/types.ts`.
3. Implement several variations of our `<CodeBlock>` component in any route `page.tsx`.

<Preview client:load>
	<Fragment slot="preview">
		<Example />
	</Fragment>
	<Fragment slot="code">
		<div class="space-y-4">
			<Code code={ReactComponentRaw} lang="tsx" title="CodeBlock.tsx" />
			<Code code={TypesRaw} lang="ts" title="types.ts" />
			<Code code={ReactPageRaw} lang="tsx" title="page.tsx" />
		</div>
	</Fragment>
</Preview>

A few things of note about this component:

- You will need to import and configure any number of [Shiki themes](https://shiki.style/themes).
- You will need to import and configure any number of [supported languages](https://shiki.style/languages).
- The component has been implemented using Skeleton's [component style guidelines](http://localhost:4321/docs/resources/contribute/components).
- This provides a number of style props for easy customization via Skeleton's standard conventions.
- The component exposes `code`, `lang`, and `theme` properties to configure on-the-fly.
- The Code Block `<pre>` tag is auto-generated by Shiki; target utility classes with: `[&>pre]:myClassHere`.

## Programmatic Usage

<div class="card preset-outlined-warning-500 p-8 space-y-8">
	<p>This use case falls outside the scope of Skeleton. The following is provided merely as guidance.</p>
</div>

In some cases you may not have direct access to the source code, such as content from a blog posts or CMS pages. In fact the code may even come pre-baked with surrounding `<pre>` or `<code>` elements. For this, you'll need to follow the general steps below. Specific implementation may differ based on your app and meta-framework.

1. Query all `<pre>` or `<code>` blocks using Javascript tools like `document.querySelectorAll()`. Be as specific as possible.
2. Ensure you have a clean instance of the source code itself, with no extra markup injected within.
3. Use Shiki's [codeToHtml](https://shiki.style/guide/install#shorthands) feature to parse the code as styled HTML markup.
4. Then append each instance of the code blocks in your DOM.

## Custom Themes

Shiki provides support for generating a custom highlighter theme:

- [Loading Custom Themes](https://shiki.style/guide/load-theme)
- [List of Bundled Themes](https://shiki.style/themes)

Shiki theme values can be defined using Skeleton custom theme properties, such as `rgba(--color-primary-500)`.

## Accessibility

See [Salma Alam-Naylor's](https://whitep4nth3r.com/about/) guidelines for [creating accessible code blocks](https://whitep4nth3r.com/blog/how-to-make-your-code-blocks-accessible-on-your-website/) that meet WGAC standards.
